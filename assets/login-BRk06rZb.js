import{t as e}from"./mutations-Cr9RCcXe.js";import{At as t,M as n,Mt as r,P as i,T as a,_t as o,at as s,d as c,f as l,gt as u,ht as d,m as f,p,xt as m}from"./index-MqxR6K1Q.js";import{i as h,n as g,o as _,t as v}from"./index.esm-BzX1ga3J.js";var y=r(t()),b=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,x=/^(\+?\d{1,3}[- ]?)?\d{10}$/,S=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;const C=v({email:g().trim().required(`Email or phone number is required`).test(`is-email-or-phone`,`Must be a valid email or phone number`,e=>e?b.test(e)||x.test(e):!1),password:g().required(`Password is required`).test(`password-strength`,`Password must be strong (8+ chars, uppercase, lowercase, number, special char).`,e=>e?S.test(e):!1).max(20,`Password cannot exceed 20 characters`)});var w=r(m()),T=()=>{let t=o(),r=u(),m=s(),g=l(m.breakpoints.down(`md`)),v=r.state?.from||c.home,{register:b,handleSubmit:x,formState:{errors:S}}=_({resolver:h(C),mode:`onTouched`}),{mutateAsync:T,isPending:E}=e(),[D,O]=(0,y.useState)({open:!1,message:``,severity:`success`}),k=(e,t)=>{t!==`clickaway`&&O(e=>({...e,open:!1}))};return(0,w.jsxs)(`div`,{className:`w-full py-10`,children:[(0,w.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 -mx-6 md:-mx-0`,children:[!g&&(0,w.jsx)(`div`,{className:`flex justify-center items-center bg-[#CBE4E8] min-h-[600px] md:min-h-screen`,children:(0,w.jsx)(`img`,{src:`/E-commerce-d/src/assets/images/auth/login.jpg`,alt:`Login illustration`,className:`w-full h-full object-cover`})}),(0,w.jsx)(`div`,{className:`flex items-center justify-center px-6 py-12 ${g?`min-h-[80vh]`:`min-h-screen`}`,children:(0,w.jsxs)(`div`,{className:`w-full max-w-md`,children:[(0,w.jsx)(`h2`,{className:`text-3xl md:text-4xl font-medium mb-6 text-center md:text-left`,children:`Log in to Exclusive`}),(0,w.jsx)(`p`,{className:`text-base mb-12 text-center md:text-left`,children:`Enter your details below`}),(0,w.jsxs)(`form`,{onSubmit:x(async e=>{try{await T({email:e.email,password:e.password}),O({open:!0,message:`Login successful! Redirecting...`,severity:`success`}),setTimeout(()=>{t(v,{replace:!0})},1500)}catch(e){O({open:!0,message:e?.response?.data?.message||e?.message||`Login failed. Please check your credentials.`,severity:`error`})}}),className:`space-y-10`,children:[(0,w.jsx)(p,{fullWidth:!0,placeholder:`Email or Phone Number`,variant:`standard`,...b(`email`),error:!!S.email,helperText:S.email?.message,sx:{"& .MuiInput-root":{fontSize:`16px`},"& .MuiInput-input::placeholder":{color:`#00000066`,opacity:1}}}),(0,w.jsx)(p,{fullWidth:!0,placeholder:`Password`,type:`password`,variant:`standard`,...b(`password`),error:!!S.password,helperText:S.password?.message,sx:{"& .MuiInput-root":{fontSize:`16px`},"& .MuiInput-input::placeholder":{color:`#00000066`,opacity:1}}}),(0,w.jsxs)(`div`,{className:`flex flex-col sm:flex-row items-center justify-between pt-4 gap-4`,children:[(0,w.jsx)(a,{type:`submit`,variant:`contained`,disabled:E,sx:{backgroundColor:`#DB4444`,color:`#fff`,textTransform:`none`,fontWeight:500,px:6,py:2,borderRadius:`4px`,fontSize:`16px`,"&:hover":{backgroundColor:`#b83636`}},children:E?(0,w.jsx)(i,{size:24,color:`inherit`}):`Log In`}),(0,w.jsx)(d,{to:`/forgot-password`,className:`text-base text-[#DB4444] hover:underline`,children:`Forget Password?`})]})]})]})})]}),(0,w.jsx)(f,{open:D.open,autoHideDuration:3e3,onClose:k,anchorOrigin:{vertical:`top`,horizontal:`right`},children:(0,w.jsx)(n,{onClose:k,severity:D.severity,variant:`filled`,sx:{width:`100%`},children:D.message})})]})};function E(){return(0,w.jsx)(T,{})}var D=E;export{D as default};